"use strict";(()=>{var e={};e.id=91,e.ids=[91],e.modules={145:e=>{e.exports=require("next/dist/compiled/next-server/pages-api.runtime.prod.js")},1313:(e,a,s)=>{s.r(a),s.d(a,{config:()=>m,default:()=>u,routeModule:()=>c});var r={};s.r(r),s.d(r,{default:()=>handler});var t=s(1802),i=s(7153),o=s(6249);let n=require("nodemailer");var l=s.n(n);let d=require("express-validator");async function handler(e,a){await (0,d.body)("email").isEmail().run(e),await (0,d.body)("name").not().isEmpty().trim().escape().run(e),await (0,d.body)("message").not().isEmpty().trim().escape().run(e);let s=(0,d.validationResult)(e);if(!s.isEmpty())return a.status(400).json({errors:s.array()});if("POST"===e.method){let s=l().createTransport({service:"gmail",auth:{user:process.env.EMAIL_USER,pass:process.env.EMAIL_PASSWORD}}),r={from:e.body.email,replyTo:e.body.email,to:"laurentdelassus@gmail.com",subject:`Message de ${e.body.name}`,text:e.body.message};s.sendMail(r,(e,s)=>{e?(console.log(e),a.status(500).send("Erreur lors de l'envoi de l'e-mail")):(console.log("Email envoy\xe9 : "+s.response),a.status(200).send("Email envoy\xe9 avec succ\xe8s"))})}else a.status(405).end()}let u=(0,o.l)(r,"default"),m=(0,o.l)(r,"config"),c=new t.PagesAPIRouteModule({definition:{kind:i.x.PAGES_API,page:"/api/contact",pathname:"/api/contact",bundlePath:"",filename:""},userland:r})}};var a=require("../../webpack-api-runtime.js");a.C(e);var __webpack_exec__=e=>a(a.s=e),s=a.X(0,[222],()=>__webpack_exec__(1313));module.exports=s})();